<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>AiStackChanEx</title>
  <!-- comment -->
  <meta name="author" content="NoRi-230401">
  <meta name="content-language" content="ja">
  <meta name="build" content="2023-06-23">
</head>

<body bgcolor="#fffacd" text="2f4f4f" leftmargin="10" topmargin="20">
  <a name="top"></a>
  <font size="3">Welcome to</font><br>
  <font color="87ceeb" size="5"><b>　AiStackChanEx</b></font><br>

  <hr color="#87ceeb" width="100%" size="3">
  <br>
  <a href="#kihon">１.基本操作</a><br>
  <a href="#chatgpt">２.chatGPT（ロール設定とTTS）</a><br>

  <a href="#inst">３.インストール手順</a><br>
  <a href="#kantan">４.簡単設定</a><br>
  <a href="#startup">５.スタートアップ設定</a><br>
  <a href="#wifiSelect">６.Wifi設定</a><br>
  <a href="#svSetting">７.サーボ設定と制御</a><br>
  <a href="#svAdjust">８.サーボ調整</a><br>
  <a href="#info">９.ApiKey取得と情報（リンク）</a><br>

  <br>
  <b>★応答に時間がかかるので動作中であれば停止してください。</b><br>
  　　<a href="http://xxx.xxx.xxx.xxx/randomSpeak?mode=off" target="StackChan">「独り言」停止</a>
  　　<a href="http://xxx.xxx.xxx.xxx/timerStop" target="StackChan">「タイマー」停止</a>
  <br><br>
  <p>
  SDの "/ex/" フォルダ下の "exStartup.json", "exServo.json", "exWifi.json",<br>
  "exApikey.json", "index.html" の５つのファイルを使用しています。<br>
  <b>★設定ファイルは、破損に備えて必ずバックアップを取ってください。</b><br>
  </p>
  <br>
  <a href="#top">トップ</a>　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>　<a
    href="http://xxx.xxx.xxx.xxx/startup" target="StackChan">exStartup.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/exServo" target="StackChan">exServo.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/wifiSelect" target="StackChan">exWifi.json</a>　<a
    href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  <br><br>
  <hr color="#87ceeb" width="100%" size="3">

  <h4><a name="kihon"></a>★１. 基本操作</h4>

  <form action="http://xxx.xxx.xxx.xxx/setting" method="get">
    音量( 0 - 255 )：<input type="text" name="volume" value="200" size="3" maxlength="3" />　<input type="submit"
      value="送信" />
  </form>
  <br>
  「独り言」 ：　<a href="http://xxx.xxx.xxx.xxx/randomSpeak?mode=on" target="StackChan">開始</a>
  　　<a href="http://xxx.xxx.xxx.xxx/randomSpeak?mode=off" target="StackChan">停止</a>
  <br><br>
  <form action="http://xxx.xxx.xxx.xxx/timer" method="get">
    タイマー時間設定(30-3599秒)：<input type="text" name="setTime" value="180" size="5" maxlength="5" />　　<input type="submit"
      value="送信" />　30秒～60分未満
  </form>
  <br>
  タイマー開始/停止：　<a href="http://xxx.xxx.xxx.xxx/timerGo" target="StackChan">開始</a>
  　　<a href="http://xxx.xxx.xxx.xxx/timerStop" target="StackChan">停止</a>
  <br><br>
  TextToSpeech(TTS)切替え：<br>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=VOICEVOX" target="StackChan">VOICEVOX</a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=VoiceText" target="StackChan">VoiceText</a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=GoogleTTS" target="StackChan">GoogleTTS</a>
  <br><br>

  <form action="http://xxx.xxx.xxx.xxx/setting?" method="get">話者番号：（VOICEVOX）　<input type="text" name="speaker" value="3"
      size="2" maxlength="2" />　 <input type="submit" value="送信" />
  </form>
  <br>

  言語：(GoogleTTS)　<br>
  　<a href="http://xxx.xxx.xxx.xxx/setting?lang=ja-JP" target="StackChan">ja-JP(日本語)</a>　　<a
    href="http://xxx.xxx.xxx.xxx/setting?lang=en-US" target="StackChan">en-US(英語)</a>
  <form action="http://xxx.xxx.xxx.xxx/setting?" method="get">　その他：<input type="text" name="lang" value="" size="6"
      maxlength="6" />　 <input type="submit" value="送信" />
  </form>
  <br>
  LEDのON/OFF：　<a href="http://xxx.xxx.xxx.xxx/setting?led=on" target="StackChan">LED_ON</a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?led=off" target="StackChan">LED_OFF</a>
  <br><br>

  toneMode(0-3):　<a href="http://xxx.xxx.xxx.xxx/setting?toneMode=0" target="StackChan">0:無音</a>
  　<a href="http://xxx.xxx.xxx.xxx/setting?toneMode=1" target="StackChan">1:ボタン押下</a>
  　<a href="http://xxx.xxx.xxx.xxx/setting?toneMode=2" target="StackChan">2:コマンド受信</a>
  　<a href="http://xxx.xxx.xxx.xxx/setting?toneMode=3" target="StackChan">3:両方</a>
  <br><br>

  音声ミュート：　<a href="http://xxx.xxx.xxx.xxx/setting?mute=on" target="StackChan">ミュートON(無音) </a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?mute=off" target="StackChan">ミュートOFF（有音）</a>
  <br><br>

  KEYロック：　<a href="http://xxx.xxx.xxx.xxx/setting?keyLock=on" target="StackChan">ロックON (ボタン操作無効) </a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?keyLock=off" target="StackChan">ロックOFF（ボタン操作有効）</a>
  <br><br>
  終了/再起動：　<a href="http://xxx.xxx.xxx.xxx/shutdown" target="StackChan">「終了」を実行</a>
  　　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">「再起動」を実行</a>
  <br><br>
  表情：<a href="http://xxx.xxx.xxx.xxx/face?expression=0" target="StackChan">0:普通</a>
  　<a href="http://xxx.xxx.xxx.xxx/face?expression=1" target="StackChan">1:楽しい</a>
  　<a href="http://xxx.xxx.xxx.xxx/face?expression=2" target="StackChan">2:眠い</a>
  　<a href="http://xxx.xxx.xxx.xxx/face?expression=3" target="StackChan">3:怪しい</a>
  　<a href="http://xxx.xxx.xxx.xxx/face?expression=4" target="StackChan">4:悲しい</a>
  　<a href="http://xxx.xxx.xxx.xxx/face?expression=5" target="StackChan">5:怒り</a>
  <br>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/speech" method="get">
    <p>
      <b>セリフ（発声）</b>： テキスト入力<br>
      <textarea rows="6" cols="60" name="say" wrap="soft"></textarea><br>
      話者・音声： VOICEVOX(0-66),　VoiceText(0-4) 　<input type="text" name="voice" value="" size="2" maxlength="2" /><br>
      表情(0-5)：<input type="text" name="expression" value="0" size="1" maxlength="1" />　上の「表情」番号を入力<br>
      　<input type="submit" value="送信" />
    </p>
  </form>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup" target="StackChan">exStartup.json</a>
  　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>

  <br><br>
  <hr>
  <h4><a name="chatgpt"></a>★２.　chatGPT（ロール設定とTTS） </h4>
  <form action="http://xxx.xxx.xxx.xxx/chat" method="get">
    <p>
      <b>※　chatGPT </b>：テキスト入力<br>
      <textarea rows="6" cols="60" name="text" wrap="soft"> </textarea><br>
      話者・音声： VOICEVOX(0-66), VoiceText(0-4)　　<input type="text" name="voice" value="1" size="2" maxlength="2" />
      　　<input type="submit" value="送信" />
    </p>
  </form>
  <a href="http://xxx.xxx.xxx.xxx/role" target="StackChan">ロール設定</a>　　
  <a href="http://xxx.xxx.xxx.xxx/role_get" target="StackChan">ロール情報取得</a> <br>
  <a href="http://xxx.xxx.xxx.xxx/role1" target="StackChan">ロール設定１個限定</a>　（AiStackChanEx独自仕様）　　
  <br>
  <br><br>

  <b>※　TextToSpeech(TTS)について</b><br><br>

  TTSの切替え：　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=VOICEVOX" target="StackChan">VOICEVOX</a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=VoiceText" target="StackChan">VoiceText</a>
  　　<a href="http://xxx.xxx.xxx.xxx/setting?ttsSelect=GoogleTTS" target="StackChan">GoogleTTS</a>
  <br><br>

  <p>
    ・　[ <b>VOICEVOX</b> ]の場合には、<b>話者番号</b>（０－６６）の選択ができます。<br>
  <form action="http://xxx.xxx.xxx.xxx/setting?" method="get">話者番号：（0-66）　<input type="text" name="speaker" value="3"
      size="2" maxlength="2" />　 <input type="submit" value="送信" />
  </form>
  <br>

  ・　[ <b>VoiceText</b> ]の場合には、<b>感情表現</b>に対応しています。<br>
  ロール設定に次の文言を加えてください。<br>
  「 　 (Happy)のように、必ず括弧で囲んで感情の種類を表し、返答の先頭に付けてください。<br>
  感情の種類には、Neutral、Happy、Sleepy、Doubt、Sad、Angry の６種類があります。　」<br>
  <br>
  ・　[ <b>GoogleTTS</b> ]の場合は、<b>多言語対応</b>です。日本語以外を使用する場合は、<br>
  他の言語で応答させるため、ロールの設定で次のような追加が必要となります。<br>
  （例）言語に「en-US(英語)」を選択したは、次の文言を加えてください。<br>
  　" Please repley to questions in English. "　または、<br>
  　" Questions must be answered in English. "<br>
  他の言語でも同様なロール設定が必要となります。
  </p>

  言語指定：(GoogleTTS)　<br>
  　<a href="http://xxx.xxx.xxx.xxx/setting?lang=ja-JP" target="StackChan">ja-JP(日本語)</a>　　<a
    href="http://xxx.xxx.xxx.xxx/setting?lang=en-US" target="StackChan">en-US(英語)</a>
  <form action="http://xxx.xxx.xxx.xxx/setting?" method="get">　その他：<input type="text" name="lang" value="" size="6"
      maxlength="6" />　 <input type="submit" value="送信" />
  </form>
  <br> <br>

  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
  　<a href="http://xxx.xxx.xxx.xxx/exApikey" target="StackChan">exApikey.json</a>
  　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  <br>
  <br>
  <hr>
  <h4> <a name="inst"></a> ★３.インストール手順</h4>
  <p>
    （１）．<a href="https://github.com/NoRi-230401/AiStackChanEx"
      target="StackChan">GitHubで提供している</a>「ex」ファルダ内の５つのファイルを<br>
    　<b>SD直下に「ex」フォルダを作成し、そこにコピーしてください。</b><br>
    　exStartup.json, exApikey.json, exServo.json, exWifi.json, index.html<br>
    <br>
    （２）．テキストエディタで、次の箇所を自分用に書き換える<br>
    　・　exWifi.json の [ssid]、[passwd]<br>
    　・　exApikey.json の [openAiApiKey]、[voiceTextApiKey](使用する場合)<br>
    　　　　　　　　　　　[voicevoxApiKey](使用する場合)<br>
    <br>
    （３）．電源を入れ Wifiでつながったら、IPアドレスの確認<br>
    　　（ブート時、またはＣボタン押下で確認できます）<br>
    <br>
    （４）．PCのWEBアドレス入力欄に、ipアドレスを入力<br>
    　　　（例）　 http://xxx.xxx.xxx.xxx/　 <br>
    <br>
    （５）．画面に「 Welcome to AiStackChanEX 」が表示されたら接続成功<br>
    次の（６）に進んでください。<br><br>
    表示がでない場合には、Wifiの接続に失敗しています。<br>
    <b>Wifiの設定の間違いや、SDの相性問題があるのでは思います。</b>
    <br>設定等を見直してください。
    <br><br>

    （６）．「４．簡単設定」に移動し、残りの設定をします。<br>
    サーボ・ポートや使用するTTSを選択することができます。<br>
  </p>
  <br>
  <a href="#top">トップ</a>
    　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
    　<a href="http://xxx.xxx.xxx.xxx/exApikey" target="StackChan">exApikey.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/wifiSelect" target="StackChan">exWifi.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>

  <br>
  <hr>
  <h4> <a name="kantan"></a> ★４.簡単設定</h4>
　Apikeyの新規または変更入力と、基本設定がここでできます。<br>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/exApikey" method="get">openAiApiKey　：　<input type="text" name="openAiApiKey"
      value="" size="55" maxlength="60" /><br>
    　<input type="submit" value="送信" />
  </form>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/exApikey" method="get">voicevoxApiKey：　<input type="text" name="voicevoxApiKey"
      value="" size="20" maxlength="30" /><br>
    　<input type="submit" value="送信" />　VOICEVOXを使わなければ必要なし
  </form>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/exApikey" method="get">voiceTextApiKey：　<input type="text" name="voiceTextApiKey"
      value="" size="20" maxlength="30" /><br>
    　<input type="submit" value="送信" />　voiceTextを使わなければ必要なし
  </form>
  <br>
  servo　 ：　<a href="http://xxx.xxx.xxx.xxx/exServo?servo=on" target="StackChan">on</a>
  　　<a href="http://xxx.xxx.xxx.xxx/exServo?servo=off" target="StackChan">off</a>
  <br><br>
  servoPort：　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portA" target="StackChan">portA</a>
  　　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portC" target="StackChan">portC</a>
  <br><br>
  ttsSelect：　<a href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=VOICEVOX" target="StackChan">VOICEVOX</a>　　<a
    href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=VoiceText" target="StackChan">VoiceText</a>
  　　<a href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=GoogleTTS" target="StackChan">GoogleTTS</a>
  <br><br>
  <p><b>変更を反映させるには、必ず再起動してください。</b> </p>
  <br>
  <a href="#top">トップ</a>　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>　<a
    href="http://xxx.xxx.xxx.xxx/startup" target="StackChan">exStartup.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/exServo" target="StackChan">exServo.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/exApikey" target="StackChan">exApikey.json</a>
    　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  <br>
  <br>
  <hr>
  <h4><a name="startup"></a> ★５.スタートアップ設定</h4>
  起動時に設定ファイル("exStartup.Json")を読み込みます。<br>
  ここでは、ファイルの内容を書き換えます。変更を反映するには、再起動が必要です。
  <br>
  <p>
    ttsSelect：　
    <a href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=VOICEVOX" target="StackChan">VOICEVOX</a>
    　　<a href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=VoiceText" target="StackChan">VoiceText</a>
    　　<a href="http://xxx.xxx.xxx.xxx/startup?ttsSelect=GoogleTTS" target="StackChan">GoogleTTS</a>
    <br>
  <form action="http://xxx.xxx.xxx.xxx/startup" method="get">
    voicevoxSpeakerNo : ( -1 to 66 )、-1は現状維持：<input type="text" name="voicevoxSpeakerNo" value="-1" size="2"
      maxlength="2" />　<input type="submit" value="送信" />
  </form>
  <br>
  lang：　<a href="http://xxx.xxx.xxx.xxx/startup?lang=ja-JP" target="StackChan">ja-JP(日本語)</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup?lang=en-US" target="StackChank">en-US(英語)</a>

  <form action="http://xxx.xxx.xxx.xxx/startup" method="get">　その他の言語　<input type="text" name="lang" value="" size="6"
      maxlength="6" />　<input type="submit" value="送信" />
  </form>
  <br>
  </p>
  <form action="http://xxx.xxx.xxx.xxx/startup" method="get">
    volume：( -1 to 255 )、-1は現状維持：<input type="text" name="volume" value="-1" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  led：　<a href="http://xxx.xxx.xxx.xxx/startup?led=on" target="StackChan">on</a>
  　　<a href="http://xxx.xxx.xxx.xxx/startup?led=off" target="StackChan">off</a>
  <br><br>
  randomSpeak：　<a href="http://xxx.xxx.xxx.xxx/startup?randomSpeak=on" target="StackChan">on</a>
  　　<a href="http://xxx.xxx.xxx.xxx/startup?randomSpeak=off" target="StackChan">off</a>
  <br><br>

  toneMode(0-3):　<a href="http://xxx.xxx.xxx.xxx/startup?toneMode=0" target="StackChan">0:無音</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup?toneMode=1" target="StackChan">1:ボタン押下</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup?toneMode=2" target="StackChan">2:コマンド受信</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup?toneMode=3" target="StackChan">3:両方</a>
  <br><br>
  mute：　<a href="http://xxx.xxx.xxx.xxx/startup?mute=on" target="StackChan">on</a>
  　　<a href="http://xxx.xxx.xxx.xxx/startup?mute=off" target="StackChan">off</a>
  <br><br>

  keyLock：　<a href="http://xxx.xxx.xxx.xxx/startup?keyLock=on" target="StackChan">on</a>
  　　<a href="http://xxx.xxx.xxx.xxx/startup?keyLock=off" target="StackChan">off</a>
  <br><br>

  <form action="http://xxx.xxx.xxx.xxx/startup" method="get">
    timer(30-3599)：<input type="text" name="setTime" value="180" size="3" maxlength="3" />　　　　　<input type="submit"
      value="送信" />　30秒～60分未満
  </form>
  <br>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
  　<a href="http://xxx.xxx.xxx.xxx/startup" target="StackChan">exStartup.json</a>
  　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>

  <br>
  <br>
  <hr>
  <h4><a name="wifiSelect"></a>★６. Wifi設定（複数AP, DHCP/固定IP対応）</h4>
<p>
  複数のアクセスポイント（AP）情報を登録できます。<br>
DHCP接続の場合には、ssid-passwd の２つの情報が必要。<br>
固定IP接続の場合は、ssid-passwd-ip-gateway-subnet の５つ、<br>
または、dns情報を含めた６つの情報の登録が必要となります。<br>
</p>

<p>
登録後の設定を反映するには、再起動が必要です。<br>
先に登録したAPの順（0から開始）に接続を試み登録した全てのAPを試します。<br>
全てが失敗した場合には、以前接続したWiFi情報を使用し接続を試します。<br>
それも失敗したら、最後にSmartConfig接続を試みます。<br>
</p>
<br>
  <b>アクセスポイント(AP)の追加</b><br>
  <form action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get">ssid　　：<input type="text" name="ssid" value="" size="40"
      maxlength="60" action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get"><br>passwd ：<input type="text" name="passwd"
      value="" size="40" maxlength="60" action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get"><br>ip　　　：<input
      type="text" name="ip" value="" size="20" maxlength="20" action="http://xxx.xxx.xxx.xxx/wifiSelect"
      method="get">(xxx.xxx.xxx.xxx)の書式<br>gateway：<input type="text" name="gateway" value="" size="20" maxlength="20"
      action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get"><br>subnet ：<input type="text" name="subnet" value=""
      size="20" maxlength="20" action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get"><br>dns　　：<input type="text"
      name="dns" value="" size="20" maxlength="20" />　　　<input type="submit" value="送信" />
  </form>
  <br><br>
  <form action="http://xxx.xxx.xxx.xxx/wifiSelect" method="get">
    AP削除：<input type="text" name="remove" value="" size="1" maxlength="1" />　番号を入力、（ 0 が最優先のAP番号）<br>
    　<input type="submit" value="送信" />
  </form>
  <br>
  <a href="http://xxx.xxx.xxx.xxx/wifiSelect?init=on" target="StackChan">設定を初期化（全削除）</a>　-最初から作成する場合-
  <br>
  <br>
  <b>最後に必ず、下の「exWifi.json」で確認してください。</b>
  <br><br>
  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
  　<a href="http://xxx.xxx.xxx.xxx/wifiSelect" target="StackChan">exWifi.json</a>　<a
    href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>


  <br><br>
  <hr>
  <h4><a name="svSetting"></a> ★７.サーボ設定と制御</h4>
  <b>(1)サーボ設定（起動時）</b><br>
  起動時にサーボ設定ファイル("exServo.Json")を読み込みます。<br>
  ここでは、ファイルの内容を書き換えます。変更を反映するには、再起動が必要です。<br>
    
  <p>
    servo：　<a href="http://xxx.xxx.xxx.xxx/exServo?servo=on" target="StackChan">on</a>
    　　<a href="http://xxx.xxx.xxx.xxx/exServo?servo=off" target="StackChan">off</a>
    <br><br>
    servoPort：　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portA" target="StackChan">portA</a>
    　　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portC" target="StackChan">portC</a>
    <br><br>

    servoMode：　<a href="http://xxx.xxx.xxx.xxx/exServo?servoMode=moving" target="StackChan">moving(通常)</a>
    　　<a href="http://xxx.xxx.xxx.xxx/exServo?servoMode=home" target="StackChan">home</a>
    　　<a href="http://xxx.xxx.xxx.xxx/exServo?servoMode=adjust" target="StackChan">adjust(調整モード)</a>
    <br><br>
  
  <form action="http://xxx.xxx.xxx.xxx/exServo" method="get">
    サーボのホーム位置(XY)を変更します。<br>  
    servoHomeX：( 70 to 110 ) :　<input type="text" name="servoHomeX" value="90" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/exServo" method="get">
    servoHomeY：( 60 to 100 ) :　<input type="text" name="servoHomeY" value="80" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br><br>
  
  <b>(2)サーボ制御（コントロール）</b><br>
  <br>
  　<a href="http://xxx.xxx.xxx.xxx/servo?mode=moving" target="StackChan">Moving</a>
  ：（通常動作）　　　　<a href="http://xxx.xxx.xxx.xxx/servo?mode=stop" target="StackChan">Stop</a>：（通常動作を停止）<br>
  <br>
  　<a href="http://xxx.xxx.xxx.xxx/servo?mode=home" target="StackChan">Home </a>
  ：（ホーム位置）　　　<a href="http://xxx.xxx.xxx.xxx/servo?mode=center" target="StackChan">Center</a>
  ：（X=90,Y=90）
  <br><br>
  <p>
  <form action="http://xxx.xxx.xxx.xxx/servo" method="get">
    　PointXY:　X(0 to 180)　　 <input type="text" name="pointX" value="90" size="3" maxlength="3" />　　Y(50 to 100) <input
      type="text" name="pointY" value="90" size="3" maxlength="3" />　<input type="submit" value="送信" />
  </form>
  </p>
  <p>
  <form action="http://xxx.xxx.xxx.xxx/servo" method="get">
    <br>　DeltaXY:　X(-180 to 180) <input type="text" name="deltaX" value="0" size="4" maxlength="4" />　Y(-50 to 50)
    <input type="text" name="deltaY" value="0" size="3" maxlength="3" />　<input type="submit" value="送信" />
  </form>
  </p>
  <br>
  　<a href="http://xxx.xxx.xxx.xxx/servo?tx=xy" target="StackChan">サーボ位置(X,Y)の取得 </a>
  <br>
  </p>
  <p>
    PointXYは、絶対位置(X:0 to 180,　 Y:50 to 100) を指定: degree<br>
    DeltaXYは、現在の位置からの相対位置(X:-180 to 180,　 Y:-50 to 50)を指定 : degree<br>
    指定された値が、サーボ設定範囲を超えた場合には、最小、最大値に張り付きます。<br>
    サーボ設定範囲（ 0＜＝X＜＝180,　50＜＝Y＜＝100 ）<br>
    <br>
    ※注意：exServo.jsonファイルの「servo」項目が「off」の場合は、サーボ制御はできません。<br>

  </p>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>
  　<a href="http://xxx.xxx.xxx.xxx/exServo" target="StackChan">exServo.json</a>
  　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  

  <br><br>
  <hr>
  
  <h4><a name="svAdjust"></a>★８. サーボ調整</h4>
  
  <b>（０）準備:　ソフトウエアの設定</b><br>
 最初に、ソフトウエアのサーボ関連の設定を行います。<br>
 <p>
  servo：　　　<a href="http://xxx.xxx.xxx.xxx/exServo?servo=on" target="StackChan">on</a>
  <br>
  servoPort：　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portA" target="StackChan">portA</a>
  　　<a href="http://xxx.xxx.xxx.xxx/exServo?servoPort=portC" target="StackChan">portC</a>　（どちらかを選択）
  <br>
servoMode：　<a href="http://xxx.xxx.xxx.xxx/exServo?servoMode=adjust" target="StackChan">adjust</a>　(「サーボ調整」モードで起動)<br>
 </p> 

※ M5Stack_Core2_for_AWSの servoPortは、画面に向かって上面の右側は"portC" / 左面は"portA"です。<br>
そこのGroveコネクタに、Groveケーブルで結線したサーボ接続基盤ユニットがつながります。
 <p>
 その後、"exServo.json"ファイルの内容を確認後に、再起動してください。<br>
再起動後は、画面に（「サーボ調整」）と表示されます。<br>
「サーボ調整」起動後は、Center（X=90,Y=90）位置で停止、およびKeyLock状態になります。<br>
「サーボ調整」モード起動が確認できたら、いったん電源OFFにするため、<br>
下記の「終了（電源OFF）」を押下して、電源OFFの状態にしてください。<br><br>
  　<a href="http://xxx.xxx.xxx.xxx/exServo" target="StackChan">exServo.json</a>
  　　　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  　　　<a href="http://xxx.xxx.xxx.xxx/shutdown" target="StackChan">終了（電源OFF）</a>
</p>  
  <br> -----------------------------------------------------------------------<br>
  <b>（１）サーボ固定前:</b><br>
  ここでは、スタックチャンのボディ組み立て前（固定前）に、サーボが、<br>
  正常に動くかどうかのチェックと、「センター出し」を行います。<br>
  <br>
  サーボ・モータに付属するサーボ・ホーン（白や黒いプラスチックの羽みたいなもの）を<br>
  サーボに付けます。これは、サーボの動きがよくわかるようにするためです。<br>
  電源OFF状態のまま、本体のポート（portAまたは、portC）のGroveコネクタに、<br>
  Groveケーブルにつながった接続基盤経由で、サーボを接続してください。<br><br>
  その後、電源ONして、本体が「サーボ調整」画面になったら、ここに戻ってきてください。<br><br>
  <p>
  <b>（１－１）動作チェック</b><br>
サーボが、正常に動くかどうかの動作チェックをおこないます。<br><br>
<b>Swing</b> は、XY軸、X軸、Y軸の３種類の移動方向を選べ、それぞれ回数指定ができます。<br>
<b>Random</b> は、(X: 45-135) , (Y: 60-90) の範囲でランダムな動きをします。<br>
<b>Moving</b> は、通常使用している動作を試すことができます。<br>
<b>Stop</b> は、Randomまたは、Movingを停止させる場合に使用してください。<br><br>

  <form action="http://xxx.xxx.xxx.xxx/servo" method="get">
    　SwingXY　:　 <input type="text" name="swingXY" value="1" size="2" maxlength="2" />　 repeat　(1 to 10)
    　<input type="submit" value="送信" />
  </form>
  

  <form action="http://xxx.xxx.xxx.xxx/servo" method="get">
  <br>
  　SwingX:（ 90 → 0 → 180 → 90 ）<input type="text" name="swingX" value="1" size="2" maxlength="2" />　repeat　(1 to 10)
  <input type="submit" value="送信" />
</form>
<br>
<form action="http://xxx.xxx.xxx.xxx/servo" method="get">
  　SwingY:（ 90 → 50 → 90 ）　　　<input type="text" name="swingY" value="1" size="2" maxlength="2" />　repeat　(1 to 10)
  <input type="submit" value="送信" />
</form>
<br>
</p>

　<a href="http://xxx.xxx.xxx.xxx/servo?mode=random" target="StackChan">Random</a>
　　　<a href="http://xxx.xxx.xxx.xxx/servo?mode=moving" target="StackChan">Moving</a>：（通常）
　　<a href="http://xxx.xxx.xxx.xxx/servo?mode=stop" target="StackChan">Stop</a>：（停止）<br>
  <br><br>

<b>（１－２）センター出し</b><br>
サーボの回転角を90度の位置に初期化します。（これが「センター出し」）<br>
サーボを固定する時は、サーボをセンター（X=90,Y=90）位置で取り付けます。<br>
<br>

　<a href="http://xxx.xxx.xxx.xxx/servo?mode=center" target="StackChan">Center</a>  ：（X=90,Y=90）
　　　　<a href="http://xxx.xxx.xxx.xxx/shutdown" target="StackChan">終了（電源OFF）</a>
  <br><br>
  センターに移動後、終了（電源OFF）して電源を切ってください。<br>
  Groveケーブル、サーボ・ホーン等を取り外し、<br>
  その後、サーボの固定作業（スタックチャンのボディ組み立て）を行ってください。<br>
  <br>  

<br> -----------------------------------------------------------------------<br>
 
  <b>（２）サーボ固定後:　ホーム位置調整</b><br>
 サーボの固定作業（スタックチャンのボディ組み立て）が完了しましたら、<br>
 電源ONにして、本体が「サーボ調整」画面になったら、再びこの場所に戻ってきてください。<br>
 <br>
 サーボは、指定場所から少しずれる場合があります。たとえば、本来のセンター位置<br>
 （X=90,Y=90）は、画面の正面（両足の真ん中）で、水平面に垂直であるのが理想的な位置です。<br>
 これに、ずれが発生している場合にその調整をおこない、ずれを修正することができます。<br><br>
 　<a href="http://xxx.xxx.xxx.xxx/servo?mode=center" target="StackChan">Center</a>
  ：（X=90,Y=90）　センター位置の確認<br><br><br>

 実際の調整は、ホーム位置の設定でずれ分を吸収せる形で調整を行います。<br>
 ホームの位置を中心にして、本体のサーボ動作をおこなってようになっています。<br> <br>
  　<a href="http://xxx.xxx.xxx.xxx/servo?mode=home" target="StackChan">Home </a>
 ：（現在のホーム位置）　初期設定では、X=90,Y=80 です。

 <p>
  Home　の位置に移動したあとで、下記でどれくらい移動すればいいのか試し、<br>
 調整をするHome位置を決めてください。XYの値は画面に表示されます。<br>
 Xは画面の正面の中心、Yは若干の上向き方向にするのがお勧めです。<br>
 画面を正面に見て、Xはプラスは右向き、Yはプラスが下向きに移動します。<br>
 <br>
    　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=-1&deltaY=0" target="StackChan">deltaX = -1</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=1&deltaY=0" target="StackChan">deltaX= +1</a>
    　　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=-1" target="StackChan">deltaY = -1</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=1" target="StackChan">deltaY= +1</a>
    <br><br>
    　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=-3&deltaY=0" target="StackChan">deltaX = -3</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=3&deltaY=0" target="StackChan">deltaX= +3</a>
    　　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=-3" target="StackChan">deltaY = -3</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=3" target="StackChan">deltaY= +3</a>
    <br><br>
    　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=-5&deltaY=0" target="StackChan">deltaX = -5</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=5&deltaY=0" target="StackChan">deltaX= +5</a>
    　　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=-5" target="StackChan">deltaY = -5</a>
    ：　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=5" target="StackChan">deltaY= +5</a>
    <br><br>
    　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=-10&deltaY=0" target="StackChan">deltaX = -10</a>
    ：<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=10&deltaY=0" target="StackChan">deltaX= +10</a>
    　　<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=-10" target="StackChan">deltaY = -10</a>
    ：<a href="http://xxx.xxx.xxx.xxx/servo?deltaX=0&deltaY=10" target="StackChan">deltaY= +10</a>
    <br> <br>

    
  <form action="http://xxx.xxx.xxx.xxx/exServo" method="get">
  調整するホーム位置(XY)が決定しましたら、ここで変更をおこないます。<br>  <br>  
  　servoHomeX：( 70 to 110 ) :　<input type="text" name="servoHomeX" value="90" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
  <br>
  <form action="http://xxx.xxx.xxx.xxx/exServo" method="get">
  　servoHomeY：( 60 to 100 ) :　<input type="text" name="servoHomeY" value="80" size="3" maxlength="3" />　<input
      type="submit" value="送信" />
  </form>
<br><br> -----------------------------------------------------------------------<br>
  <b>（３）「サーボ調整」を終了し、通常動作に戻る</b><br>
  最後に、サーボ・モードを moving(通常)にして、設定ファイル "exServo.json"の<br>
  servoHomeX,　servoHomeY,　servoMode が指定した値になっていること確認してください。<br>
  確認後に、再起動すると、新しいホーム位置の値が反映された通常動作に戻ります。<br>
  <br>
  <br>
  <a href="#top">トップ</a>
  　　　servoMode：<a href="http://xxx.xxx.xxx.xxx/exServo?servoMode=moving" target="StackChan">moving(通常)</a>
  　　　<a href="http://xxx.xxx.xxx.xxx/exServo" target="StackChan">exServo.json</a>
  　　　　<a href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>
  <br>
    </p>
  <br>
   <hr>
  <h4><a name="info"></a>★９. ApiKey取得と情報（リンク）</h4>
  <br>
  [ API ]<br>
  ApiKey取得は、下記のリンクを参考にして取得してください。<br>
  なお、VoiceTextは、現在は個人のApiKey取得ができなくなりました。<br>
  　<a href="https://openai.com/" target="StackChan">OpenAI</a><br>
  　<a href="https://qiita.com/mikito/items/b69f38c54b362c20e9e6" target="StackChan">ChatGPT API利用方法の簡単解説</a><br>
  <br>
  　<a href="https://voicevox.hiroshiba.jp/" target="StackChan">VOICEVOX</a><br>
  　<a href="https://su-shiki.com/api/" target="StackChan">VOICEVOX用API取得</a><br>
  <br>
  　<a href="https://cloud.voicetext.jp/webapi" target="StackChan">VoiceText Web API</a><br>
  <br><br>

  [ GitHub ]<br>
  　<a href="https://github.com/NoRi-230401/AiStackChanEx" target="StackChan">AiStackChanEx</a><br>

  　<a href="https://github.com/robo8080/M5Unified_StackChan_ChatGPT"
    target="StackChan">M5Unified_StackChan_ChatGPT</a><br>

  　<a href="https://github.com/robo8080/M5Unified_StackChan_ChatGPT_Global/"
    target="StackChan">M5Unified_StackChan_ChatGPT_Global</a><br>

  　<a href="https://github.com/robo8080/M5Unified_StackChan_ChatGPT_Google/"
    target="StackChan">M5Unified_StackChan_ChatGPT_Google</a><br>

  　<a href="https://github.com/yh1224/AIStackchan-hrs/" target="StackChan">AIStackchan-hrs</a><br>

  　<a href="https://github.com/robo8080/AI_StackChan2/" target="StackChan">AI_StackChan2</a><br>
  <br><br>
  [ サーボ調整 ]<br>
  　<a href="https://github.com/mongonta0716/stack-chan-tester/" target="StackChan">stack-chan-tester</a><br>
  　<a href="https://raspberrypi.mongonta.com/how-to-move-with-sg90-arduinoframework/" target="StackChan">「M５スタック沼人ノニッキ」</a><br>
  　<a href="https://note.com/ku_nel_5/n/n8c57b19884bd/" target="StackChan">「電子工作素人によるスタックチャン製作記４」</a>
    <br><br><br>
  
  
  [ アプリ / ショートカット ]<br>
  　<a href="https://notes.yh1224.com/stackchan-connect/" target="StackChan">スタックチャンCONNECT</a>
    　<a href="https://twitter.com/tie2/status/1655260749848252416/" target="StackChan">AIｽﾀｯｸﾁｬﾝ v2.00i & more</a><br>
  <br><br>
  [ Twitter ]<br>
  　<a
    href="https://twitter.com/hashtag/%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/"
    target="StackChan">＃ｽﾀｯｸﾁｬﾝ</a>　　<a
    href="https://twitter.com/hashtag/AI%EF%BD%BD%EF%BE%80%EF%BD%AF%EF%BD%B8%EF%BE%81%EF%BD%AC%EF%BE%9D?src=hashtag_click/"
    target="StackChan">＃AIｽﾀｯｸﾁｬﾝ</a><br>
  <br>
  <br>
  <br>
  <a href="#top">トップ</a>
  　<a href="http://xxx.xxx.xxx.xxx/sysInfo" target="StackChan">システム情報</a>　<a
    href="http://xxx.xxx.xxx.xxx/startup" target="StackChan">exStartup.json</a>　<a href="http://xxx.xxx.xxx.xxx/exApikey"
    target="StackChan">exApikey.json</a>　<a href="http://xxx.xxx.xxx.xxx/wifiSelect" target="StackChan">exWifi.json</a>　<a
    href="http://xxx.xxx.xxx.xxx/shutdown?reboot=on" target="StackChan">再起動</a>


  <br><br>
  <hr>
  <br><br><br><br><br><br><br><br><br>
</body>

</html>